import{d as x,i as h,h as r,o as s,l as j,X as g,p as w,u as a,ak as z,ab as y,al as A,a2 as D,B as G,T as O,am as U,an as $,ao as q,I as Q,ap as X,w as H,aq as J,ar as K,as as M,j as b,c as t,k as o,at as W,a as u,au as Y,av as Z,aw as ee,ax as ae,ay as le,az as se,aA as ne,E as te,aj as k,aB as oe}from"./index-fe79b01c.js";import{u as ue}from"./usePageTitle-1d4e84aa.js";const re={class:"flow-run-graphs__panel-content"},ce=x({__name:"FlowRunGraphs",props:{flowRun:{}},setup(T){const p=h(!1),f=h(null),e=h(!1),i=r(()=>({root:{"flow-run-graphs--fullscreen":p.value},graph:{"flow-run-graphs__graphs--panel-open":e.value},panel:{"flow-run-graphs__panel-container--panel-open":e.value}}));function v(n){f.value=n,e.value=!!n}function m(){e.value=!1}return(n,d)=>(s(),j("div",{class:y(["flow-run-graphs",i.value.root])},[g("div",{class:y(["flow-run-graphs__graphs",i.value.graph])},[w(a(z),{class:"flow-run-graphs__timeline p-background","flow-run":n.flowRun,height:"340px","selected-node":f.value,onSelection:v,"onUpdate:fullscreen":d[0]||(d[0]=c=>p.value=c)},null,8,["flow-run","selected-node"])],2),g("div",{class:y(["flow-run-graphs__panel-container",i.value.panel])},[g("div",re,[w(a(A),{"selected-node":f.value,floating:p.value,onDismiss:m},null,8,["selected-node","floating"])])],2)],2))}});const ie=x({__name:"FlowRun",setup(T){const p=D(),f=G("flowRunId");O();const{flowRun:e,subscription:i}=U(f,{interval:5e3}),v=r(()=>{var l;return(l=e.value)==null?void 0:l.deploymentId}),{deployment:m}=$(v),n=r(()=>{var l;return(l=e.value)!=null&&l.stateType?q(e.value.stateType):!0}),d=r(()=>[{label:"Logs"},{label:"Task Runs",hidden:n.value},{label:"Subflow Runs",hidden:n.value},{label:"Results",hidden:n.value},{label:"Artifacts",hidden:n.value},{label:"Details"},{label:"Parameters"}]),c=Q("tab","Logs"),{tabs:F}=X(d,c);H(f,(l,_)=>{l!==_&&(c.value="Logs")});const B=r(()=>{var l;return((l=e.value)==null?void 0:l.parameters)??{}}),I=r(()=>{var l;return((l=m.value)==null?void 0:l.parameterOpenApiSchema)??{}}),R=r(()=>J(B.value,I.value));function C(){p.push(k.flowRuns())}const N=r(()=>{var l;return(l=e.value)==null?void 0:l.stateType});K(N);const P=r(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return ue(P),M(()=>{i.error&&oe(i.error).isInRange("clientError")&&p.replace(k[404]())}),(l,_)=>{const S=b("p-code-highlight"),E=b("p-tabs"),L=b("p-layout-default");return s(),t(L,{class:"flow-run"},{header:o(()=>[a(e)?(s(),t(a(W),{key:0,"flow-run-id":a(e).id,onDelete:C},null,8,["flow-run-id"])):u("",!0)]),default:o(()=>[a(e)&&!n.value?(s(),t(ce,{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0),w(E,{selected:a(c),"onUpdate:selected":_[0]||(_[0]=V=>te(c)?c.value=V:null),tabs:a(F)},{details:o(()=>[a(e)?(s(),t(a(Y),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),logs:o(()=>[a(e)?(s(),t(a(Z),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),results:o(()=>[a(e)?(s(),t(a(ee),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),artifacts:o(()=>[a(e)?(s(),t(a(ae),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),"task-runs":o(()=>[a(e)?(s(),t(a(le),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):u("",!0)]),"subflow-runs":o(()=>[a(e)?(s(),t(a(se),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):u("",!0)]),parameters:o(()=>[a(e)?(s(),t(a(ne),{key:0,"text-to-copy":R.value},{default:o(()=>[w(S,{lang:"json",text:R.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):u("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{ie as default};
