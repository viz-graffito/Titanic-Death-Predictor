import{d as C,T as x,a2 as P,I as j,B as A,h as c,aC as m,j as V,c as r,k as u,a as n,o as p,p as w,u as k,bu as D,bv as F,bw as I,bx as N,by as z,b2 as y,bz as H,aj as Q}from"./index-fe79b01c.js";import{u as R}from"./usePageTitle-1d4e84aa.js";const G=C({__name:"BlocksCatalogCreate",setup($){const s=x(),t=P(),b=j("redirect"),i=A("blockTypeSlug"),v=c(()=>i.value?[i.value]:null),d=m(s.blockTypes.getBlockTypeBySlug,v),e=c(()=>d.response),f=c(()=>e.value?[e.value.id]:null),_=m(s.blockSchemas.getBlockSchemaForBlockType,f),l=c(()=>_.response);function h(a){s.blockDocuments.createBlockDocument(a).then(({id:o})=>B(o)).catch(o=>{y("Failed to create block","error"),console.error(o)})}function S(){t.back()}function B(a){if(y("Block created successfully","success"),b.value){const o=t.resolve(H(b.value));t.push(o);return}t.push(Q.block(a))}const g=c(()=>e.value?`Create ${e.value.name} Block`:"Create Block");return R(g),(a,o)=>{const T=V("p-layout-default");return e.value?(p(),r(T,{key:0,class:"blocks-catalog-create"},{header:u(()=>[w(k(D),{"block-type":e.value},null,8,["block-type"])]),default:u(()=>[e.value?(p(),r(k(F),{key:0,"block-type":e.value},{default:u(()=>[l.value?(p(),r(k(I),N({key:l.value.id,"block-schema":l.value},z({submit:h,cancel:S})),null,16,["block-schema"])):n("",!0)]),_:1},8,["block-type"])):n("",!0)]),_:1})):n("",!0)}}});export{G as default};
